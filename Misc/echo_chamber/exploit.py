#!/usr/bin/env python3
"""
Manual exploit script for Echo Chamber
For educational purposes and testing
"""

import requests
import json

def manual_test():
    """
    Manual test to understand the application behavior
    """
    
    base_url = "http://localhost:8080"
    
    # First, let's see what happens with a simple request
    print("[*] Testing basic functionality...")
    response = requests.get(f"{base_url}/?scanner=50000")
    print(f"GET request response length: {len(response.text)}")
    
    # Now test with POST data
    test_payload = {"signal": "test", "command": "echo 'hello'"}
    
    print("\n[*] Testing POST with JSON payload...")
    response = requests.post(
        f"{base_url}/?scanner=50000",
        data=json.dumps(test_payload),
        headers={'Content-Type': 'application/json'}
    )
    
    print(f"POST response length: {len(response.text)}")
    
    if 'highlight_file' in response.text:
        print("[*] Application showing source code (normal behavior)")
    else:
        print("[!] Unexpected response - might have triggered something!")
        print(response.text[:200])

if __name__ == "__main__":
    manual_test()