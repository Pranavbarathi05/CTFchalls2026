CC = gcc
CFLAGS = -Wall -Wextra -g -fno-stack-protector -z execstack -no-pie
TARGET = menu_pwner
SOURCE = menu_pwner.c

# Default build (vulnerable)
$(TARGET): $(SOURCE)
	$(CC) $(CFLAGS) -o $(TARGET) $(SOURCE)

# Debug build with symbols
debug: $(SOURCE)
	$(CC) $(CFLAGS) -DDEBUG -o $(TARGET)_debug $(SOURCE)

# Easier exploitation version (older libc simulation)
easy: $(SOURCE)
	$(CC) $(CFLAGS) -D_FORTIFY_SOURCE=0 -fno-stack-protector -o $(TARGET)_easy $(SOURCE)

# Clean
clean:
	rm -f $(TARGET) $(TARGET)_debug $(TARGET)_easy

# Run with gdb
gdb: $(TARGET)
	gdb ./$(TARGET)

.PHONY: clean debug easy gdb