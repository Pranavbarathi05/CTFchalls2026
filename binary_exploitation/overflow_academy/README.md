# Overflow Academy

A beginner-friendly binary exploitation challenge focusing on stack-based buffer security.

---

## Challenge Info

| Field | Value |
|-------|-------|
| **Name** | Overflow Academy |
| **Category** | Binary Exploitation |
| **Difficulty** | Easy |
| **Flag** | `DSCCTF{0V3RFL0W_4C4D3MY_M4ST3R_2026}` |
| **Author** | ShadowPB |
| **Port** | 9001 |

---

## Challenge Description

üí• Welcome to Overflow Academy!

This is a beginner-friendly buffer overflow challenge that demonstrates the classic "ret2win" technique. The program contains a hidden function `print_flag()` that reads and displays the flag, but it's never called in normal execution.

Your goal is to:
1. Overflow the buffer in `vulnerable_function()`
2. Overwrite the return address on the stack
3. Redirect execution to `print_flag()` to get the flag

**Protections disabled for learning:**
- No stack canaries (`-fno-stack-protector`)
- No ASLR - addresses are leaked
- No PIE (`-no-pie`)

This challenge is perfect for learning basic stack exploitation without dealing with modern protections.

---

## Files

- `overflow_academy.c` - Vulnerable source code
- `overflow_academy` - Compiled vulnerable binary
- `Makefile` - Build configuration with disabled protections
- `solve.py` - Complete exploitation script
- `start.sh` - Service launcher for remote deployment
- `flag.txt` - Target flag
- `Dockerfile` - Container setup
- `docker-compose.yml` - Easy deployment

---

## Quick Start

### Local Testing
```bash
# Compile with vulnerabilities
make

# Run the binary
./overflow_academy

# Or use the exploit script
python3 solve.py
```

### Remote Connection
```bash
# Connect to challenge server
nc ctf.dscctf.com 9001

# Or with solve script
python3 solve.py remote
```

### Docker Deployment
```bash
# Build and run
docker-compose up -d

# Binary will be available on port 9001
nc ctf.dscjssstuniv.in 9001
```

---

## Vulnerability Analysis

### Buffer Overflow
```c
char buffer[100];  // 100-byte buffer
fgets(buffer, 150, stdin);  // Can read 150 bytes - OVERFLOW!
```

### Stack Layout
```
[buffer - 100 bytes][padding - 12 bytes][saved RBP - 8 bytes][return address - 8 bytes]
```

### Exploitation Strategy (ret2win)
1. **Fill buffer and padding**: 120 bytes total to reach return address
2. **Overwrite return address**: Point to `print_flag()` function
3. **Get flag**: The function reads and displays flag.txt

---

## Solution Approach

### 1. Information Gathering
The program helpfully leaks both addresses:
```
Buffer address: 0x7fffffffe000
Secret function address: 0x4011e7
```

### 2. Payload Construction
```python
offset = 120  # Bytes to reach return address
payload = b'A' * offset  # Padding
payload += p64(win_addr)  # Overwrite return with print_flag()
```

### 3. Execution Flow
```
Normal: main() -> vulnerable_function() -> return to main() -> exit
Attack: main() -> vulnerable_function() -> return to print_flag() -> flag!
```

### 4. Exploitation
```bash
# Send payload
python3 solve.py

# Output:
üéâ Congratulations! Here's your flag:
DSCCTF{0V3RFL0W_4C4D3MY_M4ST3R_2026}
```

---

## Learning Objectives

- **Buffer Overflow Mechanics**: Understanding stack corruption and return address overwriting
- **ret2win Technique**: Redirecting execution to existing functions
- **Memory Layout**: Stack structure and calling conventions  
- **Address Calculation**: Computing offsets and padding correctly
- **Basic Exploitation**: First steps in binary exploitation without complex techniques

---

## Security Mitigations (Disabled)

| Protection | Status | Impact |
|------------|--------|--------|
| Stack Canaries | ‚ùå Disabled | No stack corruption detection |
| ASLR | ‚ùå Disabled | Predictable memory layout |
| NX Bit | ‚ùå Disabled | Executable stack allowed |
| PIE | ‚ùå Disabled | Fixed binary addresses |
| RELRO | ‚ùå Disabled | No GOT protection |

---

## Compilation Flags

```makefile
CFLAGS = -fno-stack-protector -z execstack -no-pie -g
```

- `-fno-stack-protector`: Disable canaries
- `-z execstack`: Make stack executable
- `-no-pie`: Disable position independent executable
- `-g`: Include debug symbols

---

## Advanced Techniques

### Alternative Exploitation Methods
1. **ROP Chain**: Return-oriented programming
2. **ret2libc**: Return to library functions
3. **GOT Overwrite**: Global offset table hijacking
4. **Stack Pivoting**: Changing stack pointer

---

## Hints

1. The binary helpfully leaks the buffer address
2. Calculate the exact offset to the return address
3. Keep your payload under 100 bytes
4. Test locally before trying remote

This challenge provides a safe introduction to binary exploitation concepts in a controlled environment.