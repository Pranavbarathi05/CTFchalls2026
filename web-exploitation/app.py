from fastapi import FastAPI
from fastapi.responses import JSONResponse
import time

app = FastAPI()

REAL_FLAG = "DSCCTF{m1ll1s3c0nd_m4tt3rs_w3b_2026}"
FAKE_FLAG = "DSCCTF{wrong_flag_try_harder}"

@app.get("/")
def index():
    return {"msg": "Nothing interesting here."}

@app.get("/flag")
def flag():
    current_ms = int(time.time() * 1000)
    window = current_ms % 60000

    if window < 100:
        return JSONResponse({"flag": REAL_FLAG})
    else:
        return JSONResponse({"flag": FAKE_FLAG})
