# Curl Me, Unfurl Me

A beginner web challenge teaching about User-Agent detection and command-line tools for web requests.

## Challenge Info

| Field | Value |
|-------|-------|
| **Name** | Curl Me, Unfurl Me |
| **Category** | Web Exploitation |
| **Difficulty** | Easy |
| **Points** | 100 |
| **Flag** | `DSCCTF{curl_unf0ld5_th3_truth_2026}` |
| **Port** | 5003 |

---

## Description

ðŸ¥Œ Curl Me, Unfurl Me [web] - 100 pts

Welcome to a website that shows different faces to different visitors!

When you visit in your browser, you see one thing...
But what if you visit differently? ðŸ¤”

The challenge name itself is a hint!
Some tools can "curl" websites from the command line...

Can you unfurl the hidden truth?

---

## Solution

### Method 1: Using curl

```bash
curl http://localhost:5003/
```

The flag will be displayed in ASCII art!

### Method 2: Using wget

```bash
wget -qO- http://localhost:5003/
```

### Method 3: Using httpie

```bash
http http://localhost:5003/
```

### Method 4: Spoofing User-Agent in Browser

Open DevTools (F12) â†’ Network â†’ Right-click â†’ "Edit and Resend"
Change User-Agent header to: `curl/7.68.0`

---

## Learning Objectives

- **User-Agent Header**: Understanding how servers detect client types
- **Command-Line Tools**: Introduction to curl, wget, and other CLI HTTP clients
- **Content Negotiation**: How websites can serve different content to different clients
- **Header Manipulation**: Servers make decisions based on HTTP headers

---

## Deployment

```bash
cd curl-unfurl
docker-compose up -d --build
```

Access at: `http://localhost:5003`

---

## Key Concepts

### What is User-Agent?

The User-Agent HTTP header identifies the client making the request:
- Browser: `Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...`
- curl: `curl/7.68.0`
- wget: `Wget/1.20.3`

### The Detection Logic

```python
user_agent = request.headers.get('User-Agent', '')
if 'curl' in user_agent.lower():
    # Return flag version
else:
    # Return browser version
```

### Why This Matters

Real-world applications sometimes:
- Serve different content to mobile vs desktop
- Block or serve different data to bots vs humans
- Provide API responses to CLI tools
- Use User-Agent for analytics or security decisions

### curl Command Basics

```bash
# Basic GET request
curl http://example.com

# Save output to file
curl http://example.com -o output.html

# Follow redirects
curl -L http://example.com

# View response headers
curl -i http://example.com

# Custom User-Agent
curl -A "MyBot/1.0" http://example.com
```

---

## Real-World Examples

### Legitimate Uses:
- Mobile-optimized vs desktop sites
- API responses vs HTML pages
- Developer-friendly error pages for curl
- Different authentication flows

### Security Issues:
- Bypassing bot detection with User-Agent spoofing
- Accessing hidden API endpoints
- Scraping protected content
- Security through obscurity failures

---

## Testing

```bash
# Test with curl (should show flag)
curl http://localhost:5003/

# Test with browser (should show different page)
# Visit in browser: http://localhost:5003/

# Test User-Agent detection
curl -A "Mozilla/5.0" http://localhost:5003/  # Browser-like UA
curl -A "curl/7.68.0" http://localhost:5003/   # curl UA
```

---

## Variations

**Make Easier:**
- Add text: "Try using the curl command!"
- Show the exact command to run
- Make the challenge name more obvious

**Make Harder:**
- Require specific curl version in User-Agent
- Need to set additional headers
- Require POST request with curl
- Check multiple headers (User-Agent + another)
- Rotate which User-Agent strings work

**Advanced Version:**
```python
# Require specific combination
if 'curl' in ua and 'Linux' in ua and request.method == 'POST':
    return flag
```

---

## Fun Details

The challenge name is a play on words:
- **Curl**: The command-line tool and also "to curl up"
- **Unfurl**: To reveal or open up (opposite of curl)
- The emoji ðŸ¥Œ is a curling stone (the sport), adding to the wordplay!

---

## Files

```
curl-unfurl/
â”œâ”€â”€ app.py              # Flask application
â”œâ”€â”€ Dockerfile          # Container setup
â”œâ”€â”€ docker-compose.yml  # Easy deployment
â”œâ”€â”€ description.md      # Challenge description
â””â”€â”€ README.md          # This file
```

---

## Educational Resources

**Learning curl:**
- Official docs: https://curl.se/docs/
- curl cheat sheet: https://devhints.io/curl
- HTTP headers explained: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers

**Try these commands:**
```bash
# See what your browser sends
curl -I https://google.com

# Test different User-Agents
curl -A "MyCoolBot/1.0" http://httpbin.org/headers

# POST with data
curl -X POST -d "key=value" http://httpbin.org/post
```

---

## Flag

`DSCCTF{curl_unf0ld5_th3_truth_2026}`

The flag message: "curl unfolds the truth" - because curl reveals what browsers hide!
