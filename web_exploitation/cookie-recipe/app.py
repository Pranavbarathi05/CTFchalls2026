from flask import Flask, request, make_response, render_template_string

app = Flask(__name__)

HOME_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>Grandma's Cookie Recipe</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            background: #fef5e7;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #8b4513;
            text-align: center;
            font-size: 36px;
        }
        .cookie-emoji {
            text-align: center;
            font-size: 60px;
            margin: 20px 0;
        }
        .recipe {
            background: #fff8dc;
            padding: 30px;
            border-left: 5px solid #d2691e;
            margin: 20px 0;
        }
        .recipe h2 {
            color: #8b4513;
            margin-top: 0;
        }
        .ingredients, .instructions {
            margin: 20px 0;
        }
        .ingredients li, .instructions li {
            margin: 10px 0;
            line-height: 1.6;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-style: italic;
        }
        .status {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
            border: 2px solid #4caf50;
        }
        .admin-status {
            background: #fff3cd;
            border: 2px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="cookie-emoji">ğŸª</div>
        <h1>Grandma's Famous Chocolate Chip Cookies</h1>
        
        <div class="status {{ 'admin-status' if is_admin else '' }}">
            <strong>Status:</strong> {{ 'Admin User ğŸ‘‘' if is_admin else 'Regular Visitor ğŸ‘¤' }}
            <br>
            {{ 'You have access to the secret recipe!' if is_admin else 'Only admins can see the secret ingredient!' }}
        </div>
        
        <div class="recipe">
            <h2>ğŸ“ Ingredients</h2>
            <ul class="ingredients">
                <li>2 1/4 cups all-purpose flour</li>
                <li>1 cup butter, softened</li>
                <li>3/4 cup granulated sugar</li>
                <li>3/4 cup packed brown sugar</li>
                <li>2 large eggs</li>
                <li>2 teaspoons vanilla extract</li>
                <li>1 teaspoon baking soda</li>
                <li>1 teaspoon salt</li>
                <li>2 cups chocolate chips</li>
                {% if is_admin %}
                <li style="color: #d32f2f; font-weight: bold;">ğŸ” SECRET INGREDIENT: DSCCTF{c00k13_t4mp3r1ng_1s_sw33t_2026}</li>
                {% else %}
                <li style="color: #999;">ğŸ”’ [Secret ingredient - Admins only]</li>
                {% endif %}
            </ul>
            
            <h2>ğŸ‘©â€ğŸ³ Instructions</h2>
            <ol class="instructions">
                <li>Preheat oven to 375Â°F (190Â°C)</li>
                <li>Mix butter and sugars until creamy</li>
                <li>Beat in eggs and vanilla</li>
                <li>Combine flour, baking soda, and salt in separate bowl</li>
                <li>Gradually blend dry mixture into butter mixture</li>
                <li>Stir in chocolate chips</li>
                {% if is_admin %}
                <li style="color: #d32f2f; font-weight: bold;">Add the secret ingredient for perfect cookies!</li>
                {% endif %}
                <li>Drop rounded tablespoons onto ungreased cookie sheets</li>
                <li>Bake 9-11 minutes or until golden brown</li>
                <li>Cool on baking sheet for 2 minutes</li>
            </ol>
        </div>
        
        <div class="footer">
            <p>Made with love by Grandma â¤ï¸</p>
            {% if not is_admin %}
            <p style="color: #999; font-size: 14px;">
                Hint: Cookies aren't just for eating... they're for the browser too! ğŸªğŸ’»
            </p>
            {% endif %}
        </div>
    </div>
</body>
</html>
"""

@app.route('/')
def home():
    # Check if admin cookie exists
    is_admin = request.cookies.get('admin') == 'true'
    
    resp = make_response(render_template_string(HOME_TEMPLATE, is_admin=is_admin))
    
    # Set cookie if it doesn't exist
    if 'admin' not in request.cookies:
        resp.set_cookie('admin', 'false')
    
    return resp

@app.route('/about')
def about():
    return """
    <html>
    <head><title>About</title></head>
    <body style="font-family: Arial; padding: 50px; text-align: center;">
        <h1>About Grandma's Kitchen</h1>
        <p>Sharing family recipes since 1950! ğŸª</p>
        <p><a href="/">Back to Recipe</a></p>
    </body>
    </html>
    """

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=False)
